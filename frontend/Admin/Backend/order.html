<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Confirm Order - ASAP</title> <!-- Updated Title -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet"/>
    <style>
        /* === PASTE ALL THE <style> content from User-Category.html HERE === */
        /* Core Styles */
        body { font-family: 'Poppins', sans-serif; background-image: url("../img/bg.jpg"); background-attachment: fixed; background-repeat: no-repeat; background-size: cover; background-color: #fff; } /* Adjusted path */
        .poppins { font-family: 'Poppins', sans-serif; color: #E46C1E; font-weight: bold; }
        .bold-text { font-weight: bold; }
        .hover-dark { transition: background 0.3s ease, color 0.3s ease; }
        .hover-dark:hover { background: #E46C1E; color: #fff; }
        .account { background: rgb(255, 209, 150); padding: 8px; border: 1px solid black; border-radius: 10px; box-shadow: 3px 3px 0px black; text-align: center; }
        .cart { background: rgb(255, 209, 150); border: 4px solid black; box-shadow: 5px 5px 0px black; }

        /* Styles for Title */
        .page-main-title { /* Replaces category-title for more general use */
            font-size: 1.8rem; font-weight: 700; color: #bf4f06;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1); margin-bottom: 1.5rem; /* Added margin */
        }
        @media (min-width: 768px) { .page-main-title { font-size: 2.2rem; } }

        /* Section Box Styles */
        .section-box {
            background-color: white; border: 4px solid black; border-radius: 10px;
            box-shadow: 5px 5px 0px black; padding: 1rem 1.5rem; /* Adjusted padding */
            margin-bottom: 1.5rem;
        }
        .section-title {
             font-size: 1.1rem; font-weight: 700; color: #bf4f06; margin-bottom: 1rem;
             border-bottom: 3px solid #f0e0c4; padding-bottom: 0.5rem;
        }
        /* Address Selection Styles */
        .address-option {
            border: 2px solid #ccc; padding: 1rem; border-radius: 8px;
            margin-bottom: 0.75rem; cursor: pointer; transition: all 0.2s ease;
            display: flex; align-items: flex-start; gap: 0.75rem; background-color: #fff; /* Ensure white background */
        }
        .address-option:hover { border-color: #E46C1E; background-color: #fff8ed; }
        .address-option input[type="radio"] { margin-top: 0.25rem; flex-shrink: 0; accent-color: #E46C1E; width: 1.1rem; height: 1.1rem;}
        .address-option label { display: block; font-weight: 600; margin-bottom: 0.25rem; font-size: 0.95rem;}
        .address-option p { font-size: 0.9rem; color: #555; line-height: 1.4; }
        .address-option.selected { border-color: #E46C1E; border-width: 3px; background-color: #fff8ed; box-shadow: 2px 2px 0px black; transform: translate(2px, 2px);}

        /* Add Address Form Styles */
        #addAddressFormContainer { border-top: 2px dashed #ccc; }
        #addAddressForm label { display: block; margin-bottom: 0.25rem; font-weight: 600; font-size: 0.9rem; color:#8B4513;}
        #addAddressForm input[type="text"], #addAddressForm textarea {
             width: 100%; padding: 0.5rem 0.75rem; border: 3px solid black; border-radius: 8px; margin-bottom: 0.75rem; font-size: 0.95rem;
             box-shadow: 3px 3px 0px black; background: #FFF8DC;
        }
         #addAddressForm input[type="text"]:focus, #addAddressForm textarea:focus {
             outline: none; border-color: #E46C1E;
             box-shadow: 1px 1px 0px black, 0 0 0 2px #E46C1E;
             transform: translate(1px, 1px);
        }
        #addAddressForm button {
             padding: 0.6rem 1.2rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s ease;
             border: 2px solid black; font-size: 0.9rem;
        }
        #saveAddressBtn { background-color: #E46C1E; color: white; box-shadow: 3px 3px 0px black; }
        #saveAddressBtn:hover { background-color: #bf4f06; box-shadow: 1px 1px 0px black; transform: translate(2px, 2px);}
        #cancelAddAddressBtn { background-color: #eee; color: #555; border-color: #aaa; box-shadow: 3px 3px 0px #ccc; margin-left: 0.5rem;}
        #cancelAddAddressBtn:hover { background-color: #ddd; box-shadow: 1px 1px 0px #ccc; transform: translate(2px, 2px);}

        /* Summary Styles (Copied & Adjusted from cart.html) */
         .cart-summary { background: rgb(255, 209, 150); border: 4px solid black; border-radius: 10px; box-shadow: 5px 5px 0px black; padding: 1.5rem; }
         .summary-title { font-size: 1.2rem; font-weight: 700; color: #bf4f06; margin-bottom: 1rem; border-bottom: 3px solid black; padding-bottom: 0.75rem; }
         .summary-row { display: flex; justify-content: space-between; margin-bottom: 0.75rem; font-size: 0.95rem; }
         .summary-total { font-weight: bold; font-size: 1.1rem; border-top: 3px solid black; padding-top: 0.75rem; margin-top: 0.75rem;}
         .place-order-button { /* Renamed class */
             display: block; width: 100%; text-align: center; background: #E46C1E; color: white;
             padding: 0.75rem 1rem; border-radius: 10px; border: 3px solid black;
             box-shadow: 4px 4px 0px black; font-weight: bold; text-transform: uppercase; font-size: 1rem;
             transition: all 0.2s ease; margin-top: 1.5rem; letter-spacing: 0.5px;
         }
         .place-order-button:hover { background: #bf4f06; box-shadow: 1px 1px 0px black; transform: translate(3px, 3px); }
         .place-order-button:disabled { background: #ccc; color: #888; border-color: #999; box-shadow: 2px 2px 0px #aaa; cursor: not-allowed; transform: none;}
         .summary-item { display: flex; justify-content: space-between; font-size: 0.9rem; color: #333; padding: 4px 0; border-bottom: 1px dashed #ccc; }
         .summary-item:last-child { border-bottom: none; }
         .summary-item-name { flex-grow: 1; padding-right: 10px; }
         .summary-item-price { font-weight: 500; flex-shrink: 0; }

    </style>
</head>
<body class="bg-white">

    <!-- Header (Copy the exact header from cart.html) -->
    <header class="p-2 md:p-4 flex flex-wrap justify-between items-center gap-2 md:gap-4 sticky top-0 z-50 bg-[#FFD196]">
        <!-- Paste the exact header content here -->
        <div class="flex items-center"> <a href="../../Login/dashboard1.html"> <img alt="ASAP Logo" class="h-10 md:h-auto w-auto md:w-[200px] mr-2 md:mr-4" src="../img/logo.png"/> </a> <div class="hidden sm:block ml-2 md:ml-10 text-red-600 text-sm"> <p class="text-sm md:text-lg font-bold" id="deliveryETA">ETA... <i class="fas fa-chevron-down"></i></p> <p class="text-xs md:text-sm truncate w-24 md:w-48" id="locationDisplay"> Fetching... </p> </div> </div> <div class="w-full md:w-auto flex-grow order-3 md:order-2 mx-auto max-w-lg"> <div class="relative w-full"> <input class="pl-10 pr-4 py-2 w-full h-[40px] md:h-[50px] rounded-[50px] border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500 text-sm md:text-base" placeholder="Search ASAP" type="text"/> <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i> </div> </div> <div class="flex items-center gap-2 md:gap-4 order-2 md:order-3"> <a href="../../Profile/main-acc-pg.html" class="text-center cursor-pointer"> <div class="w-8 h-8 md:w-10 md:h-10 rounded-full mx-auto account flex items-center justify-center"> <img src="../icon/user.svg" class="h-3/4 w-3/4" alt="Account"> </div> <p class="text-xs md:text-sm text-red-600 font-bold">Account</p> </a> <div id="cartIconContainer" class="relative"> <a href="cart.html" id="cartLink" title="View Cart Page"> <button class="flex items-center justify-center gap-1 px-2 py-2 md:px-4 md:py-2 rounded-lg focus:outline-none cart h-[40px] md:h-[50px] w-12 sm:w-auto"> <i class="fas fa-shopping-cart text-sm md:text-base flex-shrink-0"></i> <p class="text-xs md:text-sm hidden sm:block whitespace-nowrap"><b>My Cart</b></p> </button> <span id="cartItemCount" class="absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center" style="display: none;">0</span> </a> <div id="quickCartPopup" class="absolute right-0 top-full mt-2 w-72 md:w-80 bg-white border-2 border-black rounded-lg shadow-[5px_5px_0px_black] z-50 p-4" style="display: none;"> <h4 class="text-lg font-bold text-[#bf4f06] border-b pb-2 mb-3">Quick Cart</h4> <div id="quickCartItems" class="max-h-60 overflow-y-auto mb-3"> <p class="text-center text-gray-500 text-sm">Your cart is empty.</p> </div> <div class="border-t pt-3"> <div class="flex justify-between font-bold mb-3"> <span>Subtotal:</span> <span id="quickCartSubtotal">â‚¹0.00</span> </div> <a href="cart.html" class="block w-full text-center bg-[#E46C1E] text-white py-2 px-4 rounded-lg border-2 border-black shadow-[3px_3px_0px_black] hover:bg-[#bf4f06] hover:shadow-[1px_1px_0px_black] hover:translate-x-[2px] hover:translate-y-[2px] transition-all text-sm font-bold"> View Cart & Checkout </a> </div> </div> </div> </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4">

        <h1 class="page-main-title">Confirm Order Details</h1>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">

            <!-- Left Column: Address & Payment -->
            <div class="lg:col-span-2 space-y-6">

                <!-- Delivery Address Section -->
                <div class="section-box">
                    <h2 class="section-title">Select Delivery Address</h2>
                    <!-- Address List Container -->
                    <div id="addressList" class="space-y-3">
                        <!-- Populated by JS -->
                        <p class="text-gray-500 py-4">Loading addresses...</p>
                    </div>
                    <!-- Add New Address Button -->
                    <button id="showAddAddressBtn" class="mt-4 text-[#E46C1E] hover:underline font-semibold text-sm inline-flex items-center gap-1">
                        <i class="fas fa-plus-circle"></i> Add New Address
                    </button>

                    <!-- Add New Address Form (Initially Hidden) -->
                    <div id="addAddressFormContainer" class="mt-4 pt-4 border-t border-dashed border-gray-300 hidden">
                        <h3 class="font-semibold mb-3 text-base text-[#bf4f06]">Add New Address</h3>
                        <form id="addAddressForm" class="space-y-3">
                            <div>
                                <label for="newAddressLabel">Label* <span class="text-xs text-gray-500">(e.g., Home, Work)</span></label>
                                <input type="text" id="newAddressLabel" name="label" required maxlength="50" placeholder="Home">
                            </div>
                            <div>
                                <label for="newAddressFull">Full Address* <span class="text-xs text-gray-500">(House/Flat No, Street, Area, Landmark)</span></label>
                                <textarea id="newAddressFull" name="fullAddress" rows="3" required maxlength="500" placeholder="Enter full address including City and Pincode"></textarea>
                            </div>
                            <div class="mt-2 flex items-center gap-3">
                                <button type="submit" id="saveAddressBtn">Save Address</button>
                                <button type="button" id="cancelAddAddressBtn">Cancel</button>
                            </div>
                        </form>
                         <p id="addAddressError" class="text-red-500 text-sm mt-2 hidden"></p>
                    </div>
                     <p id="addressSelectionError" class="text-red-500 text-sm mt-2 hidden font-semibold">Please select a delivery address.</p>
                </div>

                <!-- Payment Method Section -->
                <div class="section-box">
                    <h2 class="section-title">Select Payment Method</h2>
                    <div class="space-y-2">
                        <!-- Only COD for now -->
                         <label class="flex items-center cursor-pointer p-3 border-2 border-[#E46C1E] rounded-lg bg-[#fff8ed]">
                             <input type="radio" name="paymentMethod" value="COD" class="mr-3 accent-color-[#E46C1E] w-4 h-4" checked>
                             <span class="font-medium text-[#bf4f06]">Cash on Delivery (COD)</span>
                         </label>
                        <!-- Placeholder for Online Payment -->
                         <!-- <label class="flex items-center cursor-not-allowed p-3 border-2 border-gray-300 rounded-lg bg-gray-100 opacity-60">
                             <input type="radio" name="paymentMethod" value="ONLINE" class="mr-3 w-4 h-4" disabled>
                             <span class="font-medium text-gray-500">Online Payment (Coming Soon)</span>
                         </label> -->
                    </div>
                </div>

            </div>

            <!-- Right Column: Order Summary -->
            <div class="lg:col-span-1">
                <div class="cart-summary h-fit lg:sticky top-24"> <!-- Adjust top offset if header height changes -->
                    <h2 class="summary-title">Order Summary</h2>
                    <!-- Condensed Item List -->
                    <div id="orderSummaryItems" class="text-sm mb-4 max-h-60 overflow-y-auto pr-2 space-y-1">
                        <!-- Summary items loaded here by JS -->
                        <p class="text-gray-500">Loading items...</p>
                    </div>
                    <!-- Totals -->
                     <div class="summary-row">
                         <span>Subtotal</span>
                         <span id="summarySubtotal">â‚¹0.00</span>
                     </div>
                     <div class="summary-row text-sm text-gray-600"> <!-- Delivery Fee Style -->
                         <span>Delivery Fee</span>
                         <span id="summaryDeliveryFee">â‚¹0.00</span>
                     </div>
                     <div class="summary-row summary-total">
                         <span>Total Payable</span>
                         <span id="summaryTotal">â‚¹0.00</span>
                     </div>
                     <!-- Place Order Button -->
                     <button id="placeOrderBtn" class="place-order-button">
                         Place Order
                     </button>
                     <p id="placeOrderError" class="text-red-600 text-sm mt-2 text-center hidden font-semibold"></p>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer (Copy from other pages) -->
     <footer class="mt-8 md:mt-12 p-4 bg-[#FFD196] text-[#bf4f06] text-center text-xs md:text-sm">
        ASAP Quick Commerce Â© 2025
    </footer>

    <!-- Scripts: cartUtils MUST be first -->
    <script src="../Backend/cartUtils.js"></script> <!-- Adjust path -->
    <script src="order.js"></script>             <!-- This page's JS -->
    <!-- Include header script if separate -->
    <script src="../../Login/dashboard-header.js"></script> <!-- Adjust path -->

</body>
</html>